!function(e,t){"use strict";var n,o=e.__SoulStore__=e.__SoulStore__||{},a=[],r={},d=t.currentScript.src.replace(/[^\/]+\.js$/,""),c=function(e,t){for(var n,o=0,a=e.length;n=e[o],o<a;o+=1)t(n,o,e)},i=function(e,t,n){c(e.querySelectorAll(t),n)},s=function(t,n){var o=new CustomEvent("store-changed",{detail:{value:t,path:n},bubbles:!1});e.dispatchEvent(o)},u=function(e,t){var n=t,o=null;return c(e.split("."),function(e,t,a){if(t>=a.length-1)return o=e,void("*"===e&&(e=n.length));"*"!==e&&(!n[e]&&t<a.length-1&&(n[e]={},"*"===a[t+1]&&(n[e]=[])),n=n[e])}),{cursor:n,index:o}},l=function(e,t){var n=u(e,t);return n.cursor[n.index]};function f(e,n){e=e||t.body,n=n||o,i(e,"[data-bind]",function(e,t){if(!e.bindAttached){e.bindAttached=!0;var o=e.dataset.bind.split(":"),a=o[0],r=o[1];r||(r=a,a="INPUT"===e.nodeName||"SELECT"===e.nodeName||"TEXTAREA"===e.nodeName?"value":"textContent"),!e.context&&e.dataset.context&&JSON.parse(e.dataset.context)&&(e.context=JSON.parse(e.dataset.context));var d=u(r,e.context||n),c=l(r,e.context||n);d.cursor[d.index]=c||e[a],e.boundObject=d;var i=d.cursor[d.index];"function"==typeof i?void 0!==(i=d.cursor[d.index](e,e.context||n))&&(e[a]=i||""):e[a]=i||"",["input","select","textarea"].indexOf(e.nodeName.toLowerCase())>=0&&e.addEventListener("change",function(){"*"===r.split(".").pop()&&(d.index=d.cursor.length),"function"==typeof d.cursor[d.index]?d.cursor[d.index](e,e.context||n,this[a]):d.cursor[d.index]=this[a],s(this[a],r)},!1)}})}function x(e,n){e=e||t.body,n=n||o,i(e,"[data-toggle]",function(e){if(!e.toggleAttached){e.toggleAttached=!0;var t=e.dataset.toggle.split(":"),o=t[0],a=t[1];a||(o="click",a=t[0]),!e.context&&e.dataset.context&&JSON.parse(e.dataset.context)&&(e.context=JSON.parse(e.dataset.context));var r=u(a,e.context||n);if("hover"===o){var d=r.cursor[r.index];e.addEventListener("mouseover",function(){r.cursor[r.index]=!d,s(r.cursor[r.index],a,e.context||n)}),e.addEventListener("mouseout",function(){r.cursor[r.index]=d,s(r.cursor[r.index],a,e.context||n)})}else e.addEventListener(o,function(){r.cursor[r.index]=!r.cursor[r.index],s(r.cursor[r.index],a,e.context||n)})}})}function v(e,n){e=e||t.body,n=n||o,i(e,"[data-action]",function(e){if(!e.actionAttached){e.actionAttached=!0;var t=e.dataset.action.split(":"),o=t[0],a=t[1],r=t[2];!r&&o&&a&&["click","mouseover","mouseout","mousemove","mousedown","mouseenter","mouseleave","submit","load","focus","blur","animationstart","animationend","animationiteration","dblclick","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","ended","error","invalid","keydown","keypress","keyup","change","play","pause","playing","seeked","touchstart","touchend","touchmove"].indexOf(o.toLowerCase())<0&&(r=a,a=o,o="click"),o&&!a&&(a=o,o="click"),!e.context&&e.dataset.context&&JSON.parse(e.dataset.context)&&(e.context=JSON.parse(e.dataset.context));var d=l(a,e.context||n);"function"==typeof d&&e.addEventListener(o.toLowerCase(),function(o){o.preventDefault(),r&&(r=l(r,e.context||n)),d(e,e.context||n,r,t[t.length-1]),s()})}})}function p(e,t){f(e,t),x(e,t),v(e,t)}p(),e.addEventListener("store-changed",function(e){i(t.body,"[data-bind]",function(e){if(!e.dataset.load){var t=e.dataset.bind.split(":"),n=t[0],a=t[1];if(a||(a=n,n=["input","select","textarea"].indexOf(e.nodeName.toLowerCase())>=0?"value":"textContent"),e.boundObject){var r=e.boundObject.cursor[e.boundObject.index];"function"==typeof r&&(r=r(e,e.context||o)),e[n]!==r&&void 0!==r&&(e[n]=r||"")}}}),a.forEach(function(e,t){if(!e.node.isConnected)return a.splice(t,1);e.render(),p(e.node,e.node.context)})}),i(t.body,"[data-load]",n=function(e){var t=e.dataset.load,n=e.dataset.bind,c=e.dataset.context;if(c&&(c=JSON.parse(c)),e.context=c,n){var i=u(n,c||o);e.context=i.cursor[i.index]||{},c=e.context}var s=function(e,t,n){return a.push({render:function(){var a=t||o,r=n.render(a);e.lastRendered!==r&&(e.innerHTML=r,e.lastRendered=r)},node:e}),a[a.length-1].render(),p(e,t),n}.bind(null,e,c);if(t.match(/\.js$/)||(t+=".js"),r[t]){if(!(r[t]instanceof Promise))return s(r[t]);r[t].then(s)}r[t]=fetch(d+t).then(function(e){return e.text()}).then(function(e){var n='var module = {exports:{}};var require=function(path){return{render:function(data){return "<div data-load=\\"'+t.replace(/\w+(\.\w+)?$/,"")+"\" + path + \"\\\" data-context='\" + JSON.stringify(data).replace(/'/g, '\\'') + \"'></div>\";}}};"+e+";return module.exports;",o=new Function(n)();return r[t]=o,o}).then(s)}),new MutationObserver(function(e){for(var t in e){for(var o,r=0,d=[].slice.call(e[t].addedNodes),c=d.length;o=d[r],r<c;r+=1)if(o.dataset&&o.dataset.load)n(o);else if(o.dataset&&o.dataset.bind)f(o);else if(o.dataset&&o.dataset.toggle)x(o);else if(o.dataset&&o.dataset.action)v(o);else if(1===o.nodeType){var i=o.querySelectorAll("[data-load]");i.length>0&&(c=(d=d.concat([].slice.call(i))).length)}for(r=0,c=(d=[].slice.call(e[t].removedNodes)).length;o=d[r],r<c;r+=1)for(var s=a.filter(function(e){return e.node===o});s.length>0;){var u=a.lastIndexOf(s.pop());a.splice(u,1)}}}).observe(t.body,{subtree:!0,childList:!0})}(window,document);